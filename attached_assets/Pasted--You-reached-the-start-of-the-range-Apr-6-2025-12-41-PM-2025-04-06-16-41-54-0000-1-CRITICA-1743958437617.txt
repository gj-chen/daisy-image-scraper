
You reached the start of the range â†’ Apr 6, 2025 12:41 PM

[2025-04-06 16:41:54 +0000] [1] [CRITICAL] WORKER TIMEOUT (pid:4)

[2025-04-06 16:41:54 +0000] [4] [ERROR] Error handling request /scrape

Traceback (most recent call last):

  File "/opt/venv/lib/python3.12/site-packages/gunicorn/workers/sync.py", line 134, in handle

    self.handle_request(listener, req, client, addr)

  File "/opt/venv/lib/python3.12/site-packages/gunicorn/workers/sync.py", line 177, in handle_request

    respiter = self.wsgi(environ, resp.start_response)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 1536, in __call__

    return self.wsgi_app(environ, start_response)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 1511, in wsgi_app

    response = self.full_dispatch_request()

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 917, in full_dispatch_request

    rv = self.dispatch_request()

         ^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/flask/app.py", line 902, in dispatch_request

    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/main.py", line 19, in scrape

    images = scrape_page(url)

             ^^^^^^^^^^^^^^^^

  File "/app/scraper/scraper.py", line 33, in scrape_page

    metadata = generate_gpt_structured_metadata_sync(context)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    raise exc from None

  File "/app/utils/openai_utils.py", line 15, in generate_gpt_structured_metadata_sync

    response = client.chat.completions.create(

  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/openai/_utils/_utils.py", line 279, in wrapper

    response = connection.handle_request(

    return func(*args, **kwargs)

           ^^^^^^^^^^^^^^^^^^^^^

               ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py", line 914, in create

    return self._post(

  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/connection.py", line 103, in handle_request

           ^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/openai/_base_client.py", line 1242, in post

    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))

    return self._connection.handle_request(request)

                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/openai/_base_client.py", line 919, in request

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    return self._request(

           ^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 136, in handle_request

  File "/opt/venv/lib/python3.12/site-packages/openai/_base_client.py", line 955, in _request

    response = self._client.send(

    raise exc

               ^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 914, in send

  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 106, in handle_request

    response = self._send_handling_auth(

               ^^^^^^^^^^^^^^^^^^^^^^^^^

    ) = self._receive_response_headers(**kwargs)

  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 942, in _send_handling_auth

        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    response = self._send_handling_redirects(

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 177, in _receive_response_headers

  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 979, in _send_handling_redirects

    response = self._send_single_request(request)

    event = self._receive_event(timeout=timeout)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/opt/venv/lib/python3.12/site-packages/httpx/_client.py", line 1014, in _send_single_request

    response = transport.handle_request(request)
